<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop | Tanner Waldo</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Open+Sans&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="logo">Tanner Waldo</div>
      <ul class="nav-links">
        <li><a href="index.html#home">Home</a></li>
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#contact">Contact</a></li>
        <li><a href="index.html#free-chapter" id="openModal">Free Chapter</a></li>
        <li><a href="tarot.html">Free Tarot Reading</a></li>
      </ul>
    </div>
  </nav>

  <!-- Store Section -->
  <section id="store" class="section">
    <h2>Buy the Book</h2>
    <p>Available now in hardcover, paperback, and ebook editions.</p>

    <div class="store-grid">

      <!-- Hardcover -->
      <div class="product-card">
        <img src="cover.png" alt="Hardcover Edition" class="product-img">
        <h3>Hardcover</h3>
        <p class="price">Available via Amazon</p>
        <a href="https://www.amazon.ca/Every-Light-Window-Tooth-Mouth/dp/1069525227/"
           target="_blank" rel="noopener" class="btn preorder">Buy Hardcover on Amazon</a>
      </div>

      <!-- Paperback -->
      <div class="product-card">
        <img src="cover.png" alt="Paperback Edition" class="product-img">
        <h3>Paperback</h3>
        <p class="price">Available via Amazon</p>
        <a href="https://www.amazon.ca/Every-Light-Window-Tooth-Mouth/dp/1069525200/"
           target="_blank" rel="noopener" class="btn preorder">Buy Paperback on Amazon</a>
      </div>

      <!-- Kobo -->
      <div class="product-card">
        <img src="cover.png" alt="Kobo eBook" class="product-img">
        <h3>eBook (Kobo)</h3>
        <p class="price">Available worldwide</p>
        <a href="https://www.kobo.com/ca/en/ebook/every-light-in-every-window-every-tooth-in-every-mouth"
           target="_blank" rel="noopener" class="btn preorder">Buy on Kobo</a>
      </div>

    </div>
  </section>

  <!-- Contact Footer -->
  <footer>
    <p>&copy; 2025 Tanner Waldo ¬∑ TannerWaldo.com</p>
  </footer>

  <!-- Free Chapter Modal -->
  <div id="chapterModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <h2>Get the First Chapter Free</h2>
      <p>Sign up below to receive a free preview and updates about <em>Every Light in Every Window, Every Tooth in Every Mouth</em>.</p>
      
      <!-- MailerLite Embedded Form -->
      <form id="signupForm" 
            action="https://assets.mailerlite.com/jsonp/1770375/forms/164309175309960831/subscribe" 
            method="post" 
            class="signup-form">
        <input type="email" name="fields[email]" placeholder="Enter your email" required>
        <button type="submit">Send Me the Chapter</button>
      </form>
    </div>
  </div>

  <!-- Modal Script -->
  <script>
    const modal = document.getElementById("chapterModal");
    const openModal = document.getElementById("openModal");
    const closeModal = document.getElementById("closeModal");

    if (openModal) {
      openModal.addEventListener("click", (e) => {
        e.preventDefault();
        modal.style.display = "flex";
      });
    }

    if (closeModal) {
      closeModal.addEventListener("click", () => modal.style.display = "none");
    }

    window.addEventListener("click", (e) => {
      if (e.target === modal) modal.style.display = "none";
    });

    // MailerLite submission
    const signupForm = document.getElementById("signupForm");
    if (signupForm) {
      signupForm.addEventListener("submit", function(e) {
        e.preventDefault();
        fetch(signupForm.action, {
          method: "POST",
          body: new FormData(signupForm)
        })
        .then(() => {
          signupForm.innerHTML = "<p>üéâ Thanks! Check your inbox for the free chapter.</p>";
        })
        .catch(() => {
          signupForm.innerHTML = "<p>‚ö†Ô∏è Oops, something went wrong. Please try again.</p>";
        });
      });
    }
  </script>

</body>
</html>
